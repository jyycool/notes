## 【AKKA】akka 入门与实践

#akka/akka 入门与实践

### chaptor1 初识Actor

### 1.1 什么是 Akka

我们所说的 Akka 通常是指一个分布式工具集, 用于协调远程计算资源的一些工作. Akka 也是 Actor 并发并发模型的一种现代实现. 它借鉴了 Erlang 的 Actor 模型的实现, 同时又引入了许多新的特性, 帮助能够处理如今的大规模问题的应用程序.



1.1.1 什么是

### 第二章: Actor与并发



#### 2.1 响应式系统设计

响应式宣言是一份文档，尝试分析Web应用程序要满足如今用户的需要以成功地进行扩展所必需的特性。

#### 2.2 响应式四准则

响应式宣言中包含了4个准则，或者说是设计目标：`灵敏性`、`伸缩性`、`容错性`以及`事件驱动设计(BDD)`。接下来通过应用实例分别对这4个准则进行概述。

##### 2.2.1 灵敏性

应用程序应该尽可能快地对请求做出响应。

如果可以在顺序获取数据和并行获取数据之间进行选择的话，为了尽快向用户返回响应，始终应该优先选择并行获取数据，可以同时请求互相没有关联的数据。

##### 2.2.2 伸缩性

应用程序应该能够根据不同的工作负载进行伸缩扩展（尤其是通过增加计算资源来进行扩展）。为了提供伸缩性，系统应该努力消除瓶颈。

添加额外的节点应该能够几乎线性地提高系统的性能。

##### 2.2.3 容错性

如果系统的某个组件发生错误，对与该组件无关的请求不应该产生任何影响。错误是难以避免的，因此应该将错误造成的影响限制在发生错误的组件之内。如果可能的话，通过对重要组件及数据的备份和冗余，这些组件发生错误时不应该对其外部行为有任何影响。

##### 2.2.4 事件驱动/消息驱动

使用消息而不直接进行方法调用提供了一种帮助我们满足另外3个响应式准则的方法。消息驱动的系统着重于控制何时、何地以及如何对请求做出响应，允许做出响应的组件进行路由以及负载均衡。

由于异步的消息驱动系统只在真正需要时才会消耗资源（比如线程），因此它对系统资源的利用更为高效。消息也可以被发送到远程机器（位置透明）。因为要发送的消息暂存在Actor外的队列中，并从该队列中发出，所以就能够通过监督机制使得发生错误的系统进行自我恢复。

#### 2.3 剖析Actor

在介绍与本书要编写的分布式数据库更相关的例子之前，我们将先介绍Actor最基本的特性，理解Actor的基本结构和方法。为了展示最简单的可能情况，我们将在这个例子中构建一个简单的Actor，这个Actor接收一个字符串“Ping”，返回字符串“Pong”作为响应

##### 2.3.1 Java Actor API

Java和Scala的API差别很大，因此需要分别介绍。

```JAVA
public class JavaPongActor extends AbstractActor {
	public PartialFunction receive() {
		return ReceiveBuilder
						.matchEquals("Ping", s -> sender().tell("Pong", ActorRef.noSender()))
            .matchAny(x -> sender().tell( 
            	new Status.Failure(new Exception("unknown message")), 
            	self()
           )).build();
  }
}
```

- AbstractActor：首先，我们继承了AbstractActor。这是一个Java 8特有的API，利用了Java 8的匿名函数（lambda）的特性。
- Receive：AbstractActor类有一个receive方法，其子类必须实现“这个方法或是通过构造函数调用该方法。( 注意, 书中使用的是 akka )